<html lang="pt-BR" data-lang="pt-BR" crm-lang="pt-BR" crm-lcid="1046" 
	same-site-mode="None">
<head>
	<link rel="stylesheet" href="./css/tbl.css">
	<link rel="stylesheet" type="text/css" href="./css/form.css">
	<link rel="stylesheet" href="./css/account.css">
	<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="./css/glyphicons-font-awesome-migrate.min.css">
	<link rel="stylesheet" type="text/css" href="./css/portalbasictheme.css">
	<link rel="stylesheet" type="text/css" href="./css/theme.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">
     <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
    crossorigin="anonymous">

		
	
		
		<link href="./css/bootstrap.min.css" rel="stylesheet" />

		<link href="./css/glyphicons-font-awesome-migrate.min.css" rel="stylesheet"/>

		<link href="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-39edee5cb6.css" rel="stylesheet" />


		
		
        <!--[if lt IE 9]>
                <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
            <![endif]-->
        
        <!--[if lt IE 10]>
                <script src="~/js/formdata.js"></script>
            <![endif]-->
        
          
</head>
<body data-sitemap-state="/"
	data-dateformat="dd/MM/yyyy"
	data-timeformat="HH:mm"
	data-datetimeformat="dd/MM/yyyy HH:mm"
	data-app-path="/"
	data-ckeditor-basepath="/js/BaseHtmlContentDesigner/Libs/msdyncrm_/libs/ckeditor/"
	data-case-deflection-url="/_services/search/b0cc7f4d-c8b0-4d38-addf-14b28c9ce182">

	
		<script type="text/javascript">
		window["Microsoft"] = window["Microsoft"] || {};
		window["Microsoft"].Dynamic365 = {
			Portal: {
				
				User: {
					contactId: '',
						userName: ''
				},
				
						version: '9.3.7.21',
						type: 'CDSStarterPortal',
						id: '3bc25486-1934-4f38-a5be-96c91ae4963b'
			}
		}
	</script>
	

	
	<!--CODIGO-->
	<h1><b>Lista de Eventos</b></h1>
	<br>

	<div class="table-responsive">
		<table id="tabServ" class="rtable">
	</div>



	<script type="text/javascript">
		var servicos;
		window.onload=()=>{
			console.log("HERE")
			const tabServ=document.getElementById("tabServ")

			const renderServs=async()=>{
				console.log("FUNCTION")
				let strHtml=`
				<table id="tabServ" class="rtable">
  			<thead>
    			<tr>
      				<th>ID</th>
      				<th>Tipo</th>
 					<th>Descricao</th>
					<th>Preco</th>
 					<th>Accao</th>
 					<th>Accao</th>
     			</tr>
    		</thead>
    		</table>`
   		const response=await fetch('http://localhost:8080/eventos');

   		eventos = await response.json();

   		for(const evento of eventos){
   			console.log("LOOP")
   				strHtml+=`<tr><td>${evento.idEvento}</td>
   				<td>${evento.tipo}</td>
   				<td>${evento.descricao}</td>
				<td>${evento.preco}â‚¬</td>
   				<td><button onclick="deleteServico(${evento.idEvento})">DELETE</button></td>
   				<td><button onclick="window.location.href='http://127.0.0.1:8080/cliente/${evento.idEvento}';">BUY</button></td></tr>`
			}
			strHtml+='</tbody></table>'
			tabServ.innerHTML=strHtml
   		}

   		renderServs();
		}

		const deleteServico=async(id)=>{
			const response=await fetch(`http://localhost:8080/eventos/${id}`,{method: "DELETE"});
		}
	</script>
</body>
</html>
